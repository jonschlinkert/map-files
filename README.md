# map-files [![NPM version](https://badge.fury.io/js/map-files.svg)](http://badge.fury.io/js/map-files)


> Traverse a directory of files, and return an object. Pass a `rename` function for the keys, or a `parse` function for the content.

## Install
#### Install with [npm](npmjs.org):

```bash
npm i map-files --save-dev
```

## Run tests

```bash
npm test
```

## Usage

```js
var mapFiles = require('map-files');
console.log(mapFiles('lib/*.txt'));
```
Returns an object that looks something like:

```js
{ a: { path: 'test/fixtures/a.txt', contents: 'This is file a.txt.' },
  b: { path: 'test/fixtures/b.txt', contents: 'This is file b.txt.' },
  c: { path: 'test/fixtures/c.txt', contents: 'This is file c.txt.' } }
```

## API
### [mapFiles](index.js#L73)

* `patterns` **{String}**: Glob patterns to pass to [globby]    
* `opts` **{Object}**: Options for globby, or pass a custom `parseFn` or `renameFn`.    
* `returns`: {Object}  

Return an object for all files matching the
given `patterns` and `options`. The basename
of the file is used as the key.

## Examples

### options.renameFn

Pass a rename function to be used as the key of each file object:

```js
var files = mapFiles('lib/*.txt', {
  renameFn: function (filepath) {
    return path.basename(filepath);
  }
});
console.log(files);
```
Returns something like:

```js
{ 'a.txt': { path: 'test/fixtures/a.txt', contents: 'This is file a.txt.' },
  'b.txt': { path: 'test/fixtures/b.txt', contents: 'This is file b.txt.' },
  'c.txt': { path: 'test/fixtures/c.txt', contents: 'This is file c.txt.' } }
```


### options.parseFn

Pass a parsing function to change the object returned for each file. The
default function reads files and returns a string. This example shows how
you might instead `require` each file.

```js
var files = mapFiles('lib/*.txt', {
  parseFn: function (filepath) {
    return {
      path: filepath,
      fn: require(path.resolve(filepath))
    }
  }
});
console.log(files);
```
Returns something like:

```js
{ a: { path: 'test/fixtures/a.js', fn: { foo: [Function: foo] } },
  b: { path: 'test/fixtures/b.js', fn: { bar: [Function: bar] } },
  c: { path: 'test/fixtures/c.js', fn: { baz: [Function: baz] } } }
```


## Author

**Jon Schlinkert**
 
+ [github/jonschlinkert](https://github.com/jonschlinkert)
+ [twitter/jonschlinkert](http://twitter.com/jonschlinkert) 

## License
Copyright (c) 2014 Jon Schlinkert, contributors.  
Released under the MIT license

***

_This file was generated by [verb-cli](https://github.com/assemble/verb-cli) on September 20, 2014._

[globby]: https://github.com/sindresorhus/globby